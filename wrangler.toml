# Agent Sandbox - Cloudflare Worker Configuration

name = "agentstorms"
main = "worker/index.ts"
compatibility_date = "2024-12-30"
compatibility_flags = ["nodejs_compat"]

# Static assets (Vite build output)
[assets]
directory = "./dist"
binding = "ASSETS"
# SPA routing: serve index.html for 404s (client-side routing)
not_found_handling = "single-page-application"

# Durable Objects
[[durable_objects.bindings]]
name = "SANDBOX_SESSION"
class_name = "SandboxSession"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["SandboxSession"]

# Environment variables (secrets managed separately)
[vars]
ENVIRONMENT = "development"

# Development server settings
[dev]
port = 8711
